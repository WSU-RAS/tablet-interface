<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script src="https://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<!-- <script src="../build/roslib.js"></script> -->

<script type="text/javascript" src="http://cdn.robotwebtools.org/EaselJS/current/easeljs.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/ros2djs/current/ros2d.min.js"></script>



<script type="text/javascript" type="text/javascript">
  /**
   * Setup all visualization elements when the page is loaded.
   */
  function init() {
    /* This is already done in common.js, you can now access ros via the global variable
    // Connect to ROS.
    var ros = new ROSLIB.Ros({
      url : 'ws://wsu-ras-joule.kyoto.local:9090'
      //url : 'ws://wsu-ras-joule.ailab.wsu.edu:9090'
    });
    */

    // Create the main viewer.
    var viewer = new ROS2D.Viewer({
      divID : 'map',
      width : 600,
      height : 500
    });

    // Setup the map client.
    var gridClient = new ROS2D.OccupancyGridClient({
      ros : ros,
      rootObject : viewer.scene
    });
    // Scale the canvas to fit to the map
    gridClient.on('change', function(){
      viewer.scaleToDimensions(gridClient.currentGrid.width, gridClient.currentGrid.height);
    });
  }
</script>



</head>

<body onload="init()">
  <h1>Experimentor User Interface</h1>
  <p>Please click the button corrosponding to the current task!</p>

    <button onclick="sendTask(1, 2, 'START TAKE MEDS TASK')" type="button">Take Pills Start</button>
    <button onclick="sendTask(1, 3, 'END TAKE MEDS TASK')" type="button">Take Pills End</button>

    <button onclick="sendTask(2, 2, 'START WALK DOG TASK')" type="button">Walk Dog Start</button>
    <button onclick="sendTask(2, 3, 'END WALK DOG TASK')" type="button">Walk Dog End</button>

    <button onclick="sendTask(0, 2, 'START WATER PLANTS TASK')" type="button">Water Plants Start</button>
    <button onclick="sendTask(0, 3, 'END WATER PLANTS TASK')" type="button">Water Plants End</button>

  <div id="statusIndicator">
    <p id="connecting">
      Connecting to rosbridge...
    </p>
    <p id="connected" style="color:#00D600; display:none">
      Connected
    </p>
    <p id="error" style="color:#FF0000; display:none">
      Error in the backend!
    </p>
    <p id="closed" style="display:none">
      Connection closed.
    </p>
  </div>


  <div id="taskSender">
    <p id="starting">
      Nothing sent yet!
    </p>
    <p id="success" style="color:#00D600; display:none">
      Successfully sent the task to Gabe!
    </p>
    <p id="failure" style="color:#FF0000; display:none">
      Failed to send task to Gabe :C
    </p>
  </div>

  <p id="task_name">
    ----
  </p>

<div style="clear: left;">
  <p style="float: left;"><img src="battery-icon.png" height="30" width="30"></p>
  <div style="padding: 21px 21px 30px 21px; margin: 20px">
    <div id="battery">
      =====
    </div>
    <div id="batteryPercent">
      =====
    </div>
  </div>
</div>

  <h1>Simple Map Example</h1>
  <div id="map"></div>

 <script type="text/javascript" src="http://static.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
 <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

 <script type="text/javascript" src="common.js"></script>
 <script type="text/javascript" src="exp.js"></script>


</body>
</html>
